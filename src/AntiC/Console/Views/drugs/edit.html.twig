{% extends "base/authenticated.base.html.twig" %}

{# Beginning of Page Header #}
{% block title %}
Edit - {{ drug.g_name }}
{% endblock title %}

{% block pageStylesheets %}
    <link href="/css/global.css" rel="stylesheet">
    <link href="/css/drugs.css" rel="stylesheet">
{% endblock pageStylesheets %}

{# Beginning of Page Content #}
{% block drugsActive %}
class="active"
{% endblock drugsActive %}


{% block content %}
    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        <h1 class="page-header">Edit Drug - {{ drug.g_name }}</h1>

        <form role="form" method="post" action="{{ path('console.drug.edit', { 'ID':drug.g_name }) }}">
            {# Todo: Figure out Sidebar Floating #}
            <div class="col-sm-3 well">
                <div class="form-group">
                    <label for="common-name">Common Name</label>
                    <input name="g_name" class="form-control" placeholder="e.g. Abiaterone" id="common-name" value="{{ drug.g_name }}" required="true" type="text">
                </div>
                <div class="form-group">
                    <label for="trade-name">Trade Name</label>
                    <input name="t_name" class="form-control" placeholder="e.g. Zytiga" id="trade-name" value="{{ drug.t_name }}" type="text">
                </div>
                <div class="form-group">
                    <label for="risk-level">Risk</label>
                    <select name="risk" class="form-control" id="risk-level">
                        <option {% if drug.risk == "Low" %}selected="selected"{% endif %}>Low</option>
                        <option {% if drug.risk == "Moderate" %}selected="selected"{% endif %}>Moderate</option>
                        <option {% if drug.risk == "High" %}selected="selected"{% endif %}>High</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Last Revision</label>
                    <div><em>{{ drug.last_revision }}</em></div>
                </div>
                <div class="form-group">
                    <label>Last Edited By</label>
                    <div><em>USER TO GO HERE</em></div>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary" method="post">Save</button>
                </div>
            </div>
            <div class="col-sm-9">
                <div class="form-group">
                    <div class="classification">
                        <label>Classification</label>
                        {% for classification in drug.classification %}            
                            <div class="row">
                                <div class="col-sm-10">
                                    <input name="classification[{{ loop.index0 }}]" class="form-control" placeholder="e.g. Xeloda" id="classification" value="{{ classification }}" type="text">
                                </div>
                                {% if not loop.first %}
                                    <div class="col-sm-1">
                                        <button class="btn btn-danger btn-xs remove-input" onclick="removeRow(this);" type="button">
                                            <span class="glyphicon glyphicon-minus-sign"></span> Remove
                                        </button>
                                    </div>
                                {% endif %}
                            </div>
                        {% endfor %}
                        <button name="classification_button" type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="contraindications">
                        <label>Contraindications</label>
                        {% for contraindications in drug.contraindications %}
                            <div class="row">
                                <div class="col-sm-10">
                                    <input name="contraindications[{{ loop.index0 }}]" class="form-control" placeholder="e.g. Hypersensitivity" id="contraindications" value="{{ contraindications }}" type="text">
                                </div>
                                {% if not loop.first %}
                                    <div class="col-sm-1">
                                        <button class="btn btn-danger btn-xs remove-input" onclick="removeRow(this);" type="button">
                                            <span class="glyphicon glyphicon-minus-sign"></span> Remove
                                        </button>
                                    </div>
                                {% endif %}
                            </div>
                        {% endfor %}
                        <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="onocologyuses">
                        <label>Onocology Uses</label>
                        {% for oncUse in drug.oncUses %}
                            <div class="row">
                                <div class="col-sm-8">
                                    <input name="onocology[{{ loop.index0 }}][type]" class="form-control" placeholder="e.g. Prostate Cancer" name="{{ oncUse.cancer_type }}" id="onocology" type="text">
                                </div>
                                <div class="col-sm-1 checkbox">
                                    <label><input name="onocology[{{ loop.index0 }}][approved]" type="checkbox" id="approved" value="approved" {% if oncUse.approved %}selected="selected"{% endif %}> Approved</label>
                                </div>
                                {% if not loop.first %}
                                    <div class="col-sm-1">
                                        <button class="btn btn-danger btn-xs remove-input" onclick="removeRow(this);" type="button">
                                            <span class="glyphicon glyphicon-minus-sign"></span> Remove
                                        </button>
                                    </div>
                                {% endif %}
                            </div>
                        {% endfor %}
                        <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="precautions">
                        <label>Precautions</label>
                        {% for precaution in drug.precautions %}
                            <div class="row">
                                <div class="col-xs-3">
                                    <input name="precaution[{{ loop.index0 }}][label]" class="form-control" placeholder="Label" id="precaution-label" value="{{ precaution.name }}" type="text">
                                </div>
                                <div class="col-xs-8">
                                    <input name="precaution[{{ loop.index0 }}][note]" class="form-control" placeholder="Precaution" id="precaution-precaution" value="{{ precaution.note }}" type="text">
                                </div>
                                {% if not loop.first %}
                                    <div class="col-sm-1">
                                        <button class="btn btn-danger btn-xs remove-input" onclick="removeRow(this);" type="button">
                                            <span class="glyphicon glyphicon-minus-sign"></span> Remove
                                        </button>
                                    </div>
                                {% endif %}
                            </div>
                        {% endfor %}
                        <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="breastfeeding">
                        <label for="breastfeeding">Breastfeeding</label>
                        <input name="breastfeeding" class="form-control" placeholder="e.g. Not Recommended" id="breastfeeding" value="{{ drug.breastfeeding }}" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <div class="fertility">
                        <label for="fertility">Fertility</label>
                        <input name="fertility" class="form-control" placeholder="e.g. Not Recommended" id="fertility" value="{{ drug.fertility }}" type="text">
                    </div>
                </div>
                <div class="form-group">
                    {# Look into this one #}
                    <div class="metabolism">
                        <label for="metabolism">Metabolism</label>
                        <input name="metabolism" class="form-control" placeholder="e.g. Hepatic" id="metabolism" value="{{ drug.metabolism }}" type="text">
                    </div>
                </div>
                <div class="form-group">
                    {# Look into this one #}
                    <div class="oraldose">
                        <label for="oraldose">Usual Oral Dose</label>
                        <input name="uo_dose" class="form-control" placeholder="e.g. 200-400 mg/day" id="oraldose" value="{{ drug.uo_dose }}" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <div class="excretion">
                        <label for="excretion">Excretion</label>
                        <input name="excretion" class="form-control" placeholder="e.g. Renal/Fecal" id="excretion" value="{{ drug.excretion }}" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <div class="available">
                        <label for="available">Available</label>
                        <input name="available" class="form-control" placeholder="e.g. Tablets: 2.5, 5, 10" id="available" value="{{ drug.available }}" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <div class="administration">
                        <label for="administration">Administration</label>
                        <input name="administration" class="form-control" placeholder="e.g. Oral with food" id="administration" value="{{ drug.administration }}" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <div class="monitoring">
                        <label for="monitoring">Monitoring</label>
                        {% for monitor in drug.monitoring %}
                            <input name="monitoring[{{ loop.index0 }}]" class="form-control" placeholder="e.g. Disease progression and toxicities " id="monitoring" value="{{ monitor }}" type="text">
                            {% if not loop.first %}
                                <div class="col-sm-1">
                                    <button class="btn btn-danger btn-xs remove-input" onclick="removeRow(this);" type="button">
                                        <span class="glyphicon glyphicon-minus-sign"></span> Remove
                                    </button>
                                </div>
                            {% endif %}
                        {% endfor %}
                        <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                    </div>
                </div>
                <hr>
                <h2>Side Effects</h2>
                <div class="form-group">
                    <div class="frequency">
                        <label for="frequency">Frequency</label>
                        <input name="sideeffect_frequency"class="form-control" placeholder="e.g. Clinically significant" id="frequency" type="text">
                    </div>
                </div>
                <div class="form-group">
                    <div class="effects">
                        <label>Side Effects</label>
                        {% for sideEffect in drug.sideEffects %}
                            <div class="row">
                                <div class="col-sm-8">
                                    <input name="sideeffect_effect[]"class="form-control" placeholder="e.g. Hypertension" value="{{ sideEffect.name }}" type="text">
                                </div>
                                <div class="col-sm-1 checkbox">
                                    <label><input name="sideeffect_severe[]" type="checkbox" id="important" value="important" {% if sideEffect.severe %}selected="selected"{% endif %}> Important</label>
                                </div>
                                {% if not loop.first %}
                                    <div class="col-sm-1">
                                        <button class="btn btn-danger btn-xs remove-input" onclick="removeRow(this);" type="button">
                                            <span class="glyphicon glyphicon-minus-sign"></span> Remove
                                        </button>
                                    </div>
                                {% endif %}
                            </div>
                        {% endfor %}
                        <button onclick="addRow(this);" type="button" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                    </div>
                </div>
                <hr>
                <h2>Drug Interactions</h2>
                <div class="form-group">
                    {# is that word correct? #}
                    <label>Avoid Concomitant Use</label>
                    <div class="row">
                        <div class="col-sm-4">
                            <input name="interact_concomit[]" class="form-control" placeholder="e.g. Avoid estrogen" type="text">
                        </div>
                        <div class="col-sm-1 or-text">
                            <strong>OR</strong>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_concomit_cyp[]" class="form-control">
                                <option></option>
                                <option>CYP 450 1A2</option>
                                <option>CYP 450 2A6</option>
                                <option>CYP 450 2B6</option>
                            </select>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_concomit_cyp_type[]" class="form-control">
                                <option></option>
                                <option>Inhibitor</option>
                                <option>Inducer</option>
                                <option>Substrate</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                </div>
                <div class="form-group">
                    <label><span class="glyphicon glyphicon-arrow-up"></span> Effect (this drug)</label>
                    <div class="row">
                        <div class="col-sm-4">
                            <input name="interact_incr_this[]" class="form-control" placeholder="e.g. Pheonobarb" type="text">
                        </div>
                        <div class="col-sm-1 or-text">
                            <strong>OR</strong>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_incr_this_cyp[]" class="form-control">
                                <option></option>
                                <option>CYP 450 1A2</option>
                                <option>CYP 450 2A6</option>
                                <option>CYP 450 2B6</option>
                            </select>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_incr_this_cyp_type[]" class="form-control">
                                <option></option>
                                <option>Inhibitor</option>
                                <option>Inducer</option>
                                <option>Substrate</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                </div>
                <div class="form-group">
                    <label><span class="glyphicon glyphicon-arrow-down"></span> Effect (this drug)</label>
                    <div class="row">
                        <div class="col-sm-4">
                            <input name="interact_decr_this[]" class="form-control" placeholder="e.g. Azanavir" type="text">
                        </div>
                        <div class="col-sm-1 or-text">
                            <strong>OR</strong>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_decr_this_cyp[]" class="form-control">
                                <option></option>
                                <option>CYP 450 1A2</option>
                                <option>CYP 450 2A6</option>
                                <option>CYP 450 2B6</option>
                            </select>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_decr_this_cyp_type[]" class="form-control">
                                <option></option>
                                <option>Inhibitor</option>
                                <option>Inducer</option>
                                <option>Substrate</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                </div>
                <div class="form-group">
                    <label><span class="glyphicon glyphicon-sort"></span> Effect (this drug)</label>
                    <div class="row">
                        <div class="col-sm-4">
                            <input name="interact_both_this[]" class="form-control" placeholder="e.g. Echinacea" type="text">
                        </div>
                        <div class="col-sm-1 or-text">
                            <strong>OR</strong>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_both_this_cyp[]" class="form-control">
                                <option></option>
                                <option>CYP 450 1A2</option>
                                <option>CYP 450 2A6</option>
                                <option>CYP 450 2B6</option>
                            </select>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_both_this_cyp_type[]" class="form-control">
                                <option></option>
                                <option>Inhibitor</option>
                                <option>Inducer</option>
                                <option>Substrate</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                </div>
                <div class="form-group">
                    <label><span class="glyphicon glyphicon-arrow-up"></span> Effect</label>
                    <div class="row">
                        <div class="col-sm-4">
                            <input name="interact_incr[]" class="form-control" placeholder="e.g. Pheonobarb" type="text">
                        </div>
                        <div class="col-sm-1 or-text">
                            <strong>OR</strong>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_incr_cyp[]" class="form-control">
                                <option></option>
                                <option>CYP 450 1A2</option>
                                <option>CYP 450 2A6</option>
                                <option>CYP 450 2B6</option>
                            </select>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_incr_cyp_type[]" class="form-control">
                                <option></option>
                                <option>Inhibitor</option>
                                <option>Inducer</option>
                                <option>Substrate</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                </div>
                <div class="form-group">
                    <label><span class="glyphicon glyphicon-arrow-down"></span> Effect</label>
                    <div class="row">
                        <div class="col-sm-4">
                            <input name="interact_decr[]" class="form-control" placeholder="e.g. Azanavir" type="text">
                        </div>
                        <div class="col-sm-1 or-text">
                            <strong>OR</strong>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_decr_cyp[]" class="form-control">
                                <option></option>
                                <option>CYP 450 1A2</option>
                                <option>CYP 450 2A6</option>
                                <option>CYP 450 2B6</option>
                            </select>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_decr_cyp_type[]" class="form-control">
                                <option></option>
                                <option>Inhibitor</option>
                                <option>Inducer</option>
                                <option>Substrate</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                </div>
                <div class="form-group">
                    <label><span class="glyphicon glyphicon-sort"></span> Effect</label>
                    <div class="row">
                        <div class="col-sm-4">
                            <input name="interact_both[]" class="form-control" placeholder="e.g. Echinacea" type="text">
                        </div>
                        <div class="col-sm-1 or-text">
                            <strong>OR</strong>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_both_cyp[]" class="form-control">
                                <option></option>
                                <option>CYP 450 1A2</option>
                                <option>CYP 450 2A6</option>
                                <option>CYP 450 2B6</option>
                            </select>
                        </div>
                        <div class="col-sm-3">
                            <select name="interact_both_cyp_type[]" class="form-control">
                                <option></option>
                                <option>Inhibitor</option>
                                <option>Inducer</option>
                                <option>Substrate</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                </div>
                <div class="form-group">
                    <label><input name="anti-neoplastic" type="checkbox" id="cautionwith" value="cautionwith" {% if drug.anti_neoplastic %}selected="selected"{% endif %}> Caution with other anti-neoplastic agents (unless per protocol)</label>
                </div>
                <div class="form-group">
                    <label>Other Effects</label>
                    <div class="row">
                        <div class="col-sm-10">
                            <input name="interact_other[]" class="form-control" placeholder="e.g. Caution with agents" id="othereffects" type="text">
                        </div>
                    </div>
                    <button type="button" onclick="addRow(this);" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                </div>
                <hr>
                <h2>Dose Adjustments</h2>
                <div class="form-group">
                    {% for doseAdjust in drug.doseAdjusts %}
                        <div class="row">
                            <div class="col-sm-3">
                                <label for="adjustmentname">Name</label>
                                <input name="adjust_problem[]" type="text" class="form-control" id="adjustmentname" value="{{ doseAdjust.problem }}" placeholder="Name">
                            </div>
                            <div class="col-sm-5">
                                <label for="adjustmentdesc">Adjustment</label>
                                <textarea name="adjust_note[]" class="form-control" rows="3" id="adjustmentdesc">{{ doseAdjust.note }}</textarea>
                            </div>
                            <div class="col-sm-4">
                                <label for="chartimage">Adjustment Chart</label>
                                <input name="adjust_chart[]" type="file" id="chartimage">
                            </div>
                            {% if not loop.first %}
                                <div class="col-sm-1">
                                    <button class="btn btn-danger btn-xs remove-input" onclick="removeRow(this);" type="button">
                                        <span class="glyphicon glyphicon-minus-sign"></span> Remove
                                    </button>
                                </div>
                            {% endif %}
                        </div>
                    {% endfor %}
                    <button onclick="addRow(this);" type="button" class="btn btn-success btn-xs add-more"><span class="glyphicon glyphicon-plus-sign"></span> Add More</button>
                </div>
            </div>
        </form>
    </div>
{% endblock content %}